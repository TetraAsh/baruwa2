.. _generate_csr:

==============================================
How to generate  a Certificate Signing Request
==============================================

Access to the Baruwa enterprise repository is authenticated using SSL/TLS
machine certificates.

You have to create a private key and a Certificate Signing Request (CSR) for
each server that is subscribed to Baruwa enterprise.

The CSR is used to issue your server's certificate. After creating the CSR
send it to us and we will issue your the server certificate.

.. _enterprise_pk:

Generate the private key
------------------------

To generate the private key you need either **openssl** or **gnutls**
installed.

OpenSSL::

	openssl genrsa -aes256 -out client.key 4096

GnuTLS::

	certtool -p --bits 4096 --pkcs-cipher aes-256 --outfile client.key

The private key generated by OpenSSL uses a pass phrase yum can not use keys that
have pass phrases you need to remove the pass phrase from they key::

	openssl rsa -in client.key -out newkey.pem
	mv newkey.pem client.key

.. _enterprise_csr:

Generate the Certificate Signing Request (CSR)
----------------------------------------------

Use the private key you created above to generate the CSR make sure you
enter the correct values to the prompts especially the ``Common Name``

For GnuTLS please choose yes for ``Will the certificate be used for encryption (RSA ciphersuites)? (y/N):``
and ``Is this a TLS web client certificate? (y/N):``

OpenSSL::

	openssl req -new -key client.key -out client.csr

GnuTLS::

	certtool --generate-request --load-privkey client.key --outfile client.csr

Send us the CSR
---------------

Email us the CSR ``client.csr`` only and keep the private key ``client.key`` in
a safe place you will need it when you are configuring your server to use
Baruwa Enterprise.
